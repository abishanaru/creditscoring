---
title: "Credit Scoring SBD2"
author: "Abishan Arumugavel, Vladyslav Gorbunov, Gilles Nikles, Josua Reich"
date: "2023-10-10"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Used librarys
```{r}
library(readr)
library(tidyverse)
library(ggplot2)
```


## Import dataset
```{r show_col_types = False}
loan_sample <- read_csv("loan_sample_8.csv")
```


## Excercise 1

### 1.1 Describe the data. Specifically:

#### 1.1.1: Check and report the structure of the data set.
```{r show_col_types = False}
str(loan_sample)
```
#### 1.1.2: How many numeric and how many categorical variables are included in the data? What categorical variable has the most levels in it?
```{r show_col_types = False}
numeric_vars_count <- sum(sapply(loan_sample, is.numeric))
numeric_vars_count
categorical_vars_count <- sum(sapply(loan_sample, is.character))
categorical_vars_count
```
```{r show_col_types = False}
# Categorial Label with the most Levels
categorical_levels <- sapply(loan_sample, function(x) if(is.character(x)) length(unique(x)) else NA)
cat_var_most_levels <- names(which.max(categorical_levels))
cat_var_most_levels
```
#### 1.1.3: Summarize the variables. Discuss the summary statistics obtained.
```{r show_col_types = False}
# Categorial Label with the most Levels
summary(loan_sample)
```
Our loan data includes information on 40,000 loans. The average loan size is about $11,687, but this number can be as low as $1,000 or as high as $40,000, showing that loan amounts are different for different people. The average interest rate on a loan is 12.62%, but some people get lower rates like 5.31%, and others get higher rates up to 27.49%. This shows there are many different interest rates that people are getting. People who have taken out loans make an average of $63,400 a year, but there is a big difference in how much money people make. Some make more, and some make less. The debt-to-income ratio (DTI) tells us how much debt people have compared to their income. On average, this number is 18.22% for the loans we looked at. Looking at how many credit lines people have open, the average is 10, but in total, they might have had up to 21 over time. This tells us about how many loans or credit cards people might be using or have used before. The average amount people owe on their credit lines is $11,995, and they use about half of the credit available to them. This tells us about how much of their available loan money they are using. People also pay about $1,818 in interest on average. This is extra money they pay in addition to the loan they took out. When we look at all the loans and credit people have, the total amount they owe on average is $99,100. This shows that people have a lot of loans or owe a lot of money on their credit lines. Finally, the average limit people have on their credit lines is $24,194. This is how much the bank or loan company lets them borrow in total.

#### 1.1.4: Check the levels of the target variable by choosing the appropriate visualization. Is the target variable balanced?
```{r show_col_types = False}
ggplot(loan_sample, aes(x = Status)) + 
  geom_bar() +
  labs(title = 'Distribution of Target Variable (Status)', x = 'Status', y = 'Count')
```


1.1.5: Check the distribution of the numeric variables in the data set (include different visual representations).
```{r show_col_types = False}
# Histograms
loan_sample %>% 
  select_if(is.numeric) %>% 
  gather(key = "variable", value = "value") %>%
  ggplot(aes(x = value)) +
  geom_histogram(bins = 30) +
  facet_wrap(~variable, scales = 'free_x') +
  theme_minimal()
```
```{r show_col_types = False}
#Boxplots
loan_sample %>% 
  select_if(is.numeric) %>% 
  gather(key = "variable", value = "value") %>%
  ggplot(aes(y = value)) +
  geom_boxplot() +
  facet_wrap(~variable, scales = 'free') +
  theme_minimal()
```


### 1.2: Investigating outliers with a box plot
Elaborate your view on how to proceed in dealing with the outliers and – if necessary – take appropriate action.
```{r}


```

### 1.3: Investigating the distribution of the numeric features per the two levels of our target feature
(i.e. default vs non-default). Discuss the visualizations. Which variables seem to be relevant in predicting the target feature?
```{r}


```

### 1.4: Use a bar plot visualization to investigate the associations between the categorical variables and the target feature.
```{r}


```

### 1.5: Visualize the correlations that emerge between the numerical features. Discuss the results. Which variables are highly correlated? Decide whether you keep all variables.
```{r}


```

### 1.6: Plot an interactive scatter plot of the association between the loan amount requested and the annual income of the borrower. Discuss the plot. What can you tell about the association?
```{r}


```

### 1.7: Create a new balanced data set where the two levels of the target variable will be equally represented; Create a bar plot of the newly created target variable. Why is this step necessary?
```{r}


```

